bind generic \cA first-entry
bind generic \cE last-entry
bind generic \cF next-page
bind generic \cB previous-page
bind generic N search-opposite

bind index \cF next-page
bind index \cB previous-page
bind index \cA first-entry
bind index \cE last-entry
bind index \cU toggle-new
bind index q exit
bind index G sync-mailbox
macro index a "<limit>all\n"
macro index l "<limit>!~G "

bind pager \cE bottom
bind pager \cU mark-as-new
bind pager <down> next-line
bind pager <up> previous-line
bind pager N search-reverse
bind pager \cA top
bind pager \cF next-page
bind pager \cB previous-page

macro compose a "<attach-file>?"
bind compose d detach-file
bind compose A edit-description

macro attach s "<save-entry>~/unison/<enter>y"

folder-hook /INBOX$ 'macro index,pager c "<change-folder>+$my_account/<tab><tab>"'
folder-hook /INBOX$ 'macro index,pager C "<copy-message>+$my_account/<tab><tab>"'
folder-hook /INBOX$ 'macro index,pager ! "<change-folder>+$my_account/INBOX<enter>"'
folder-hook /INBOX$ 'macro index,pager < "<change-folder>+$my_account/Sent<enter>"'

# Switching between accounts/mailboxes
macro index ,a0 "\
<sync-mailbox>\
:set my_account = fastmail<enter>\
:macro index x ,a1<enter>\
<change-folder>+fastmail/INBOX<enter>\
"
macro index ,a1 "\
<sync-mailbox>\
:set my_account = hermes<enter>\
:macro index x ,a0<enter>\
<change-folder>+hermes/INBOX<enter>\
"
macro index x ,a1

macro index $ "<shell-escape>pkill -SIGUSR1 offlineimap<enter>"


# Switching between e-mail addresses
macro compose ,f0 "\
:set smtp_url=smtps://$my_fastmail_user:$my_fastmail_pass@smtp.fastmail.com:465<enter>\
<edit-from><kill-line>Andrew Ho <andrewho@andrewho.co.uk><enter>\
:macro compose x ,f1<enter>\
"
macro compose ,f1 "\
:set smtp_url=smtps://$my_doctors_user:$my_doctors_pass@mail1.doctors.org.uk:465<enter>\
<edit-from><kill-line>Andrew Ho <andrewlkho@doctors.org.uk><enter>\
:macro compose x ,f2<enter>\
"
macro compose ,f2 "\
:set smtp_url=smtps://$my_fastmail_user:$my_fastmail_pass@smtp.fastmail.com:465<enter>\
<edit-from><kill-line>Andrew Ho <andrewlkho@cantab.net><enter>\
:macro compose x ,f0<enter>\
"
macro compose x ,f1
